<!DOCTYPE html>

<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>注册</title>
    <link rel="stylesheet" href="./css/signUp.css">
    <script src="./js/jquery-3.7.1.min.js"></script>
    <script>
        $(document).ready(() => {
            $(".signup-btn").click(() => {
                const id = $(".id").val();
                const name = $(".name").val();
                const password = $(".password").val();
                if (id == "" || name == "" || password == "") {
                    alert("身份证号、姓名或密码不能为空!");
                    return;
                }
                $.ajax({
                    url: "http://www.dony.cn:5000/signUp",
                    type: "post",
                    data: { "id": id, "name": name, "password": password },
                    success: (result) => {
                        console.log(result);
                        if (result == "1") {
                            alert("注册成功");
                            window.location.href = "/";
                        }
                        else if(result == "id_exist"){
                            alert("该账户已存在!\n请检查身份证号是否填写错误");
                        }
                        else{
                            alert("注册失败，请稍后再试");
                        }
                    },
                    error: () => {
                        alert("服务器后端炸了X_X\n请联系开发人员:(");
                    }
                });
            });
        });
    </script>
</head>

<body>
    <div class="main-wrapper">
        <div class="header">
            <img src="./img/DONYLOGO.jpg" alt="DONY" class="logo">
        </div>

        <div class="container">
            <div class="card">
                <div class="card_body">
                    <h1 class="login-title">注册</h1>

                    <form action="/" method="post" class="login-form">
                        <div class="form-group">
                            <label for="id">身份证号</label>
                            <input class="info id" type="text" id="id" placeholder="请输入身份证号">
                        </div>

                        <div class="form-group">
                            <label for="name">姓名</label>
                            <input class="info name" type="text" id="name" placeholder="请输入姓名">
                        </div>

                        <div class="form-group">
                            <label for="password">密码</label>
                            <input class="info password" type="password" id="password" placeholder="请输入密码">
                        </div>

                        <button type="button" class="signup-btn">注册</button>
                    </form>
                </div>
            </div>
        </div>

        <div class="footer">
            <span class="footer-text">已有账号?</span>
            <a class="login-link" href="./login.html">立即登录</a>
        </div>
    </div>
</body>

</html>